{"version":3,"file":"soul-select.js","sourceRoot":"","sources":["../../../../../../../src/components/soul-select/soul-select.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAC,SAAS,EAAsB,OAAO,EAAE,KAAK,EAAgB,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAC,MAAM,eAAe,CAAC;AAC/H,OAAO,EAAC,aAAa,EAAC,MAAM,8BAA8B,CAAC;AAC3D,OAAO,EAAC,SAAS,EAAE,UAAU,EAAE,WAAW,EAAC,MAAM,mBAAmB,CAAC;AACrE,OAAO,EAAC,mBAAmB,EAAE,MAAM,EAAC,MAAM,oBAAoB,CAAC;AAC/D,OAAO,EAAC,YAAY,EAAC,MAAM,6BAA6B,CAAC;AAUzD,MAAM,OAAO,UAAU;EAyCrB;IAPQ,sBAAiB,GAAG,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;IAE5C,qBAAgB,GAAG,CAAC,CAAC,CAAC;IACtB,qBAAgB,GAAY,KAAK,CAAC;IACzB,eAAU,GAAG,kBAAkB,EAAE,QAAQ,QAAQ,CAAC;IAC3D,kBAAa,GAAkB,IAAI,aAAa,EAAE,CAAC;;oBApCT,KAAK;yBACA,KAAK;;qBAET,KAAK;;qBAEd,OAAO;4BACA,YAAY;;sBAET,KAAK;qBACN,KAAK;;;2BAGiJ,WAAW;;kCAO1K,KAAK;IAoB7C,IAAI,CAAC,oBAAoB,GAAG,IAAI,cAAc,CAAC,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;GAC1F;EAEM,kBAAkB;IACvB,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC,KAAkB,EAAE,EAAE;MACvE,IAAI,KAAK,CAAC,QAAQ,KAAK,QAAQ,EAAE;QAC/B,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;QAC9B,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,CAAC;QAChC,IAAI,CAAC,cAAc,EAAE,CAAC;OACvB;IACH,CAAC,CAAC,CAAC;IACH,IAAI,CAAC,oBAAoB,CAAC,UAAU,EAAE,CAAC;IACvC,IAAI,CAAC,oBAAoB,CAAC,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;IAC3D,IAAI,CAAC,2BAA2B,EAAE,CAAC;IACnC,IAAI,CAAC,uBAAuB,EAAE,CAAC;IAC/B,IAAI,CAAC,wBAAwB,EAAE,CAAC;EAClC,CAAC;EAEM,oBAAoB;IACzB,IAAI,CAAC,oBAAoB,CAAC,UAAU,EAAE,CAAC;IACvC,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,CAAC;EAClC,CAAC;EAGM,KAAK,CAAC,cAAc,CAAC,KAA8B;IACxD,MAAM,IAAI,CAAC,yBAAyB,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;EACrD,CAAC;EAGM,aAAa,CAAC,KAA8B;IACjD,IAAI,CAAC,cAAc,EAAE,CAAC;IACtB,KAAK,CAAC,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC;IAChC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;EACpF,CAAC;EAGM,KAAK,CAAC,WAAW,CAAC,KAA8B;IACrD,MAAM,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;EACxC,CAAC;EAGM,KAAK,CAAC,oBAAoB,CAAC,KAA8B;IAC9D,MAAM,aAAa,GAAG,KAAK,CAAC,MAAM,CAAC;IACnC,IAAI,CAAC,gBAAgB,CAAC,aAAa,EAAE,aAAa,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;EACtE,CAAC;EAEO,KAAK,CAAC,gBAAgB,CAAC,MAAkB,EAAE,UAAmB,EAAE,QAAiB;IACvF,IAAI,UAAU,EAAE;MACd,IAAI,IAAI,CAAC,SAAS,EAAE;QAClB,MAAM,CAAC,YAAY,GAAG,KAAK,CAAC;OAC7B;WAAM;QACL,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC;QAClC,MAAM,IAAI,CAAC,yBAAyB,CAAC,MAAM,CAAC,CAAC;OAC9C;MACD,IAAI,QAAQ,EAAE;QACZ,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;OAC1C;KACF;SAAM,IAAI,IAAI,CAAC,uBAAuB,EAAE,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;MAC5D,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;MACzC,IAAI,QAAQ,EAAE;QACZ,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;OAClC;KACF;EACH,CAAC;EAIM,gBAAgB;IACrB,MAAM,gBAAgB,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;IACjF,gBAAgB,CAAC,OAAO,CAAC,eAAe,CAAC,EAAE,CAAC,IAAI,CAAC,yBAAyB,CAAC,eAAe,CAAC,CAAC,CAAC;EAC/F,CAAC;EAEM,KAAK,CAAC,OAAO,CAAC,aAA4B;IAC/C,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC,mBAAmB,CAAC,aAAa,CAAC,EAAE;MAC1D,MAAM,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC;MACnE,MAAM,eAAe,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;MAClD,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAC,UAAU,EAAE,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,OAAO,EAAE,eAAe,CAAC,MAAM,EAAE,eAAe,EAAE,eAAe,EAAC,CAAC,CAAC;MAC/H,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE;QAC1B,IAAI,CAAC,aAAa,EAAE,CAAC;OACtB;MACD,IAAI,CAAC,0BAA0B,EAAE,CAAC;MAClC,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC,YAAY,CAAC,gBAAgB,CAAC,CAAC,CAAC;KACrH;EACH,CAAC;EAED,MAAM;IACJ,OAAO,CACL,EAAC,IAAI;MACH,WAAK,KAAK,EAAE;UACV,aAAa,EAAE,IAAI;UACnB,uBAAuB,EAAE,IAAI,CAAC,MAAM,KAAK,UAAU;UACnD,sBAAsB,EAAE,IAAI,CAAC,MAAM,KAAK,SAAS;SAClD,EACI,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,aAAa,GAAG,EAAoB;QACtD,CAAC,IAAI,CAAC,SAAS,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;UAChF,WAAK,KAAK,EAAC,oBAAoB;YAC7B,aAAO,OAAO,EAAE,IAAI,CAAC,UAAU;cAAG,IAAI,CAAC,KAAK;cACzC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;gBACjC,YAAM,KAAK,EAAC,+BAA+B,IAAE,IAAI,CAAC,eAAe,CAAQ,CAAC,CAAC,CAAC,EAAE,CAE1E,CACJ,CAAC,CAAC,CAAC,EAAE;QAEb,WAAK,KAAK,EAAC,sBAAsB;UAC9B,IAAI,CAAC,aAAa,EAAE;UACrB,aAAO,QAAQ,EAAE,IAAI,CAAC,QAAQ,EACvB,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,EACpC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAChC,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,EACtC,EAAE,EAAE,IAAI,CAAC,UAAU,EACnB,IAAI,EAAC,MAAM,EACX,UAAU,EAAE,KAAK,EACjB,KAAK,EAAC,oBAAoB,EAC1B,QAAQ,EAAE,CAAC,IAAI,CAAC,UAAU,EAC1B,OAAO,EAAC,IAAI,EACZ,QAAQ,QACR,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,YAAY,GAAG,EAAsB,GAAG;UAC9D,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,WAAK,KAAK,EAAC,wBAAwB,EAAC,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,gBAAgB,GAAG,EAAoB,GAAQ,CAAC,CAAC,CAAC,EAAE;UAC3H,WAAK,KAAK,EAAC,0BAA0B,EAAC,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,kBAAkB,GAAG,EAAoB,IAC5F,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;YAC7B,YAAM,KAAK,EAAC,gCAAgC,IAAE,IAAI,CAAC,WAAW,CAAQ,CAAC,CAAC,CAAC,EAAE,CAEzE;UACN,WAAK,KAAK,EAAC,yBAAyB;YAClC,iBAAW,IAAI,EAAC,MAAM,EAAC,IAAI,EAAC,GAAG,EAAC,KAAK,EAAC,SAAS,GAAa,CACxD,CACF;QACL,IAAI,CAAC,yBAAyB,CAAC,CAAC;UAC/B,WAAK,KAAK,EAAC,6BAA6B,IAAE,IAAI,CAAC,aAAa,CAAO,CAAC,CAAC,CAAC,EAAE;QAEzE,CAAC,IAAI,CAAC,SAAS,IAAI,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;UAC7C,WAAK,KAAK,EAAC,mBAAmB,IAAE,IAAI,CAAC,QAAQ,CAAO,CAAC,CAAC,CAAC,EAAE;QAE3D,WAAK,KAAK,EAAC,2BAA2B,EAAC,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,kBAAkB,GAAG,EAAoB,GAAQ;QACxG,WAAK,KAAK,EAAC,qBAAqB;UAC9B,YAAM,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,aAAa,GAAG,EAAqB,EAAE,IAAI,EAAC,QAAQ,GAAQ,CAC9E,CACF;MACN,yBAAK,KAAK,EAAC,sBAAsB,IAAK,EAAC,SAAS,EAAE,EAAE,EAAC,IAAE,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,GAAG,EAAwB;QAChH,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,WAAK,KAAK,EAAC,8BAA8B;UAAC,YAAM,KAAK,EAAC,gCAAgC,IAAE,IAAI,CAAC,gBAAgB,CAAQ,CAAM,CAAC,CAAC,CAAC,EAAE;QAC/J,YAAM,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,cAAc,GAAG,EAAqB,EAAE,YAAY,EAAE,IAAI,CAAC,2BAA2B,CAAC,IAAI,CAAC,IAAI,CAAC,GAAS,CAC5H,CACD,CACR,CAAC;EACJ,CAAC;EAED,IAAW,mBAAmB;IAC5B,OAAO,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,yBAAyB,IAAI,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;EACzF,CAAC;EAED,IAAW,yBAAyB;IAClC,OAAO,IAAI,CAAC,aAAa,IAAK,UAAU,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;EAC/D,CAAC;EAED,IAAY,aAAa;IACvB,OAAO,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;EACtD,CAAC;EAEO,aAAa;IACnB,OAAO,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAChC,oBAAc,IAAI,EAAE,IAAI,CAAC,yBAAyB,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,SAAS,EAAE,QAAQ,EAAE,IAAI,CAAC,eAAe,EACxJ,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,cAAc,GAAG,EAA4B,GAAiB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;EACvG,CAAC;EAEO,kBAAkB;IACxB,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;EACrG,CAAC;EAEO,0BAA0B;IAChC,MAAM,iBAAiB,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;IACnE,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,iBAAiB,CAAC,EAAE;MAC3C,IAAI,CAAC,+BAA+B,EAAE,CAAC;KACxC;EACH,CAAC;EAEO,gBAAgB,CAAC,MAAsB;IAC7C,OAAO,MAAM,CAAC,YAAY,CAAC,YAAY,CAAC,gBAAgB,CAAC,CAAC;EAC5D,CAAC;EAEO,+BAA+B;IACrC,IAAI,CAAC,4BAA4B,EAAE,CAAC;IACpC,MAAM,uBAAuB,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC;IACrG,IAAI,uBAAuB,KAAK,CAAC,CAAC,EAAE;MAClC,IAAI,CAAC,sBAAsB,CAAC,uBAAuB,CAAC,CAAC;KACtD;EACH,CAAC;EAEO,KAAK,CAAC,uBAAuB,CAAC,IAAY;IAChD,MAAM,OAAO,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;IAC1E,MAAM,gBAAgB,GAAoB,EAAE,CAAC;IAC7C,KAAK,MAAM,UAAU,IAAI,OAAO,EAAE;MAChC,IAAI,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,EAAE;QACnC,UAAU,CAAC,YAAY,CAAC,YAAY,CAAC,gBAAgB,EAAE,MAAM,CAAC,CAAC;OAChE;WAAM,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,KAAK,EAAE,EAAE;QAC7C,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC,CAAC;UACrC,UAAU,CAAC,eAAe,CAAC,YAAY,CAAC,gBAAgB,CAAC,CAAC,CAAC;UAC3D,UAAU,CAAC,YAAY,CAAC,YAAY,CAAC,gBAAgB,EAAE,MAAM,CAAC,CAAC;OAClE;WAAM;QACL,gBAAgB,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE;UAC7E,OAAO,CAAC,CAAC,CAAC,UAAU,CAAC,eAAe,CAAC,YAAY,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,YAAY,CAAC,YAAY,CAAC,gBAAgB,EAAE,MAAM,CAAC,CAAC;QACvI,CAAC,CAAC,CAAC,CAAC;OACL;KACF;IACD,MAAM,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;EACtC,CAAC;EAEO,KAAK,CAAC,SAAS,CAAC,KAAoB;IAC1C,QAAQ,KAAK,CAAC,GAAG,EAAE;MACjB,KAAK,MAAM,CAAC,KAAK,CAAC,CAAC;QACjB,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;QAC3B,MAAM;OACP;MACD,KAAK,MAAM,CAAC,IAAI,CAAC,CAAC;QAChB,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,mBAAmB,EAAE,CAAC,CAAC;QAClD,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,MAAM;OACP;MACD,KAAK,MAAM,CAAC,EAAE,CAAC,CAAC;QACd,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,uBAAuB,EAAE,CAAC,CAAC;QACtD,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,MAAM;OACP;MACD,KAAK,MAAM,CAAC,KAAK,CAAC,CAAC;QACjB,IAAI,CAAC,UAAU,CAAC,KAAK,IAAI,EAAE,CAAC,MAAM,IAAI,CAAC,uBAAuB,EAAE,CAAC,CAAC;QAClE,MAAM;OACP;MACD,KAAK,MAAM,CAAC,GAAG,CAAC,CAAC;QACf,IAAI,IAAI,CAAC,gBAAgB,EAAE;UACzB,IAAI,CAAC,aAAa,EAAE,CAAC;UACrB,MAAM,IAAI,CAAC,WAAW,EAAE,CAAC;SAC1B;QACD,MAAM;OACP;MACD;QACE,MAAM;KACT;EACH,CAAC;EAEO,KAAK,CAAC,YAAY,CAAC,MAAkB;IAC3C,MAAM,IAAI,CAAC,WAAW,EAAE,CAAC;IACzB,IAAI,CAAC,aAAa,EAAE,CAAC;IACrB,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE;MACxB,MAAM,CAAC,YAAY,GAAG,IAAI,CAAC;MAC3B,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE,MAAM,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;KAChE;EACH,CAAC;EAEO,KAAK,CAAC,WAAW;IACvB,IAAI,IAAI,CAAC,UAAU,EAAE;MACnB,IAAI,CAAC,YAAY,CAAC,KAAK,GAAG,EAAE,CAAC;MAC7B,MAAM,IAAI,CAAC,uBAAuB,CAAC,EAAE,CAAC,CAAC;MACvC,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;MACpC,MAAM,eAAe,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;MAClD,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAC,UAAU,EAAE,EAAE,EAAE,OAAO,EAAE,eAAe,CAAC,MAAM,EAAE,eAAe,EAAE,eAAe,EAAC,CAAC,CAAC;KAC3G;EACH,CAAC;EAEO,uBAAuB;IAC7B,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;EACjE,CAAC;EAEO,cAAc;IACpB,IAAI,CAAC,UAAU,EAAE,CAAC,OAAO,CAAC,aAAa,CAAC,EAAE,CAAC,aAAa,CAAC,WAAW,GAAG,KAAK,CAAC,CAAC;EAChF,CAAC;EAEO,KAAK,CAAC,yBAAyB,CAAC,MAAkB;;IACxD,MAAM,mBAAmB,GAAG,MAAM,MAAM,CAAC,KAAK,EAAE,CAAC;IACjD,mBAAmB,CAAC,OAAO,GAAG,IAAI,CAAC;IACnC,mBAAmB,CAAC,QAAQ,GAAG,KAAK,CAAC;IACrC,mBAAmB,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;IAC7C,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;IACzC,MAAA,IAAI,CAAC,gBAAgB,0CAAE,WAAW,CAAC,mBAAmB,CAAC,CAAC;EAC1D,CAAC;EAEO,YAAY,CAAC,OAAoB;IACvC,OAAO,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,UAAU,EAAE;MAC1B,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;KACzC;EACH,CAAC;EAEO,oBAAoB,CAAC,OAAmB;IAC9C,IAAI,CAAC,UAAU,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;MACjC,IAAI,MAAM,CAAC,UAAU,KAAK,OAAO,CAAC,UAAU,EAAE;QAC5C,MAAM,CAAC,YAAY,GAAG,KAAK,CAAC;OAC7B;IACH,CAAC,CAAC,CAAC;EACL,CAAC;EAEO,UAAU,CAAC,YAAwC;IACzD,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE;MAC1B,IAAI,CAAC,aAAa,EAAE,CAAC;KACtB;SAAM;MACL,YAAY,EAAE,CAAC;KAChB;EACH,CAAC;EAEO,aAAa;IACnB,IAAI,IAAI,CAAC,gBAAgB,EAAE;MACzB,IAAI,CAAC,iBAAiB,CAAC,WAAW,EAAE,CAAC;KACtC;SAAM;MACL,IAAI,CAAC,yBAAyB,EAAE,CAAC;MACjC,IAAI,CAAC,iBAAiB,CAAC,WAAW,EAAE,CAAC;MACrC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;MAC7B,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;MACtF,IAAI,CAAC,yBAAyB,EAAE,CAAC;KAClC;EACH,CAAC;EAEO,KAAK,CAAC,2BAA2B;IACvC,MAAM,WAAW,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,CAAC;IACzC,IAAI,WAAW,EAAE;MACf,MAAM,YAAY,GAAG,MAAM,WAAW,CAAC,KAAK,EAAE,CAAC;MAC/C,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;MACtD,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG,IAAI,CAAC,kBAAkB,CAAC,qBAAqB,EAAE,CAAC,MAAM,IAAI,CAAC;KACtG;EACH,CAAC;EAEO,cAAc,CAAC,KAAoB;IACzC,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE;MAC1B,IAAI,CAAC,aAAa,EAAE,CAAC;KACtB;IACD,IAAI,IAAI,CAAC,aAAa,EAAE;MACtB,KAAK,CAAC,cAAc,EAAE,CAAC;KACxB;EACH,CAAC;EAEO,yBAAyB;IAC/B,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;EACrF,CAAC;EAEO,4BAA4B;IAClC,MAAM,gBAAgB,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;IAC3C,IAAI,SAAS,CAAC,gBAAgB,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,EAAE;MACtD,gBAAgB,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,WAAW,GAAG,KAAK,CAAC;KAC7D;EACH,CAAC;EAEO,uBAAuB;IAC7B,OAAO,IAAI,CAAC,gBAAgB,GAAG,CAAC,KAAK,IAAI,CAAC,UAAU,EAAE,CAAC,MAAM,CAAC;EAChE,CAAC;EAEO,wBAAwB;IAC9B,OAAO,IAAI,CAAC,gBAAgB,KAAK,CAAC,CAAC;EACrC,CAAC;EAEO,sBAAsB,CAAC,KAAa;IAC1C,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;IAC9B,MAAM,gBAAgB,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;IAC3C,gBAAgB,CAAC,KAAK,CAAC,CAAC,WAAW,GAAG,IAAI,CAAC;EAC7C,CAAC;EAEO,uBAAuB;IAC7B,IAAI,CAAC,IAAI,CAAC,wBAAwB,EAAE,EAAE;MACpC,MAAM,aAAa,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;MACnE,IAAI,aAAa,IAAI,IAAI,CAAC,gBAAgB,EAAE;QAC1C,IAAI,CAAC,4BAA4B,EAAE,CAAC;QACpC,IAAI,CAAC,sBAAsB,CAAC,aAAa,CAAC,CAAC;QAC3C,IAAI,CAAC,gBAAgB,EAAE,CAAC;OACzB;KACF;EACH,CAAC;EAEO,mBAAmB;IACzB,IAAI,CAAC,IAAI,CAAC,uBAAuB,EAAE,EAAE;MACnC,MAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;MAC3D,IAAI,SAAS,IAAI,IAAI,CAAC,gBAAgB,EAAE;QACtC,IAAI,CAAC,4BAA4B,EAAE,CAAC;QACpC,IAAI,CAAC,sBAAsB,CAAC,SAAS,CAAC,CAAC;QACvC,IAAI,CAAC,kBAAkB,EAAE,CAAC;OAC3B;KACF;EACH,CAAC;EAEO,gBAAgB;IACtB,MAAM,iBAAiB,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;IACnE,IAAI,CAAC,IAAI,CAAC,0BAA0B,CAAC,iBAAiB,CAAC,EAAE;MACvD,iBAAiB,CAAC,cAAc,EAAE,CAAC;KACpC;EACH,CAAC;EAEO,kBAAkB;IACxB,MAAM,iBAAiB,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;IACnE,IAAI,CAAC,IAAI,CAAC,0BAA0B,CAAC,iBAAiB,CAAC,EAAE;MACvD,MAAM,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC;MAC9D,MAAM,YAAY,GAAG,iBAAiB,CAAC,YAAY,CAAC;MACpD,MAAM,YAAY,GAAG,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC;MACtD,MAAM,SAAS,GAAG,CAAC,IAAI,CAAC,gBAAgB,GAAG,YAAY,CAAC,GAAG,YAAY,GAAG,YAAY,GAAG,iBAAiB,CAAC;MAC3G,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,EAAC,GAAG,EAAE,SAAS,GAAG,YAAY,EAAC,CAAC,CAAC;KAClE;EACH,CAAC;EAEO,0BAA0B,CAAC,MAAsB;IACvD,MAAM,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC;IAC9D,MAAM,YAAY,GAAG,MAAM,CAAC,YAAY,CAAC;IACzC,MAAM,YAAY,GAAG,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC;IAEtD,OAAO,CAAC,IAAI,CAAC,gBAAgB,GAAG,YAAY,CAAC,IAAI,YAAY,IAAI,CAAC,IAAI,CAAC,gBAAgB,GAAG,YAAY,CAAC,GAAG,YAAY,IAAI,YAAY,GAAG,iBAAiB,CAAC;EAC7J,CAAC;EAEO,UAAU;IAChB,OAAO,IAAI,CAAC,cAAc,CAAC,gBAAgB,EAAE,CAAC,MAAM,CAAC,CAAC,aAAa,EAAE,OAAO,EAAE,EAAE;MAC9E,IAAI,OAAO,CAAC,OAAO,KAAK,mBAAmB,EAAE;QAC3C,MAAM,cAAc,GAAG,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAqB,CAAC;QACxE,aAAa,CAAC,IAAI,CAAC,GAAG,cAAc,CAAC,CAAC;OACvC;WAAM;QACL,aAAa,CAAC,IAAI,CAAC,OAAyB,CAAC,CAAC;OAC/C;MACD,OAAO,aAAa,CAAC;IACvB,CAAC,EAAE,EAAsB,CAAC,CAAC;EAC7B,CAAC;EAEO,KAAK,CAAC,uBAAuB;IACnC,MAAM,gBAAgB,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;IAC3C,MAAM,cAAc,GAAG,gBAAgB,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;IAC/D,IAAI,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,EAAE;MACvC,MAAM,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;KACzC;EACH,CAAC;EAEO,yBAAyB;IAC/B,UAAU,CAAC,GAAG,EAAE;MACd,MAAM,cAAc,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;MAChE,IAAI,cAAc,IAAI,CAAC,IAAI,CAAC,0BAA0B,CAAC,cAAc,CAAC,EAAE;QACtE,cAAc,CAAC,cAAc,EAAE,CAAC;OACjC;IACH,CAAC,EAAE,CAAC,CAAC,CAAC;EACR,CAAC;EAEO,gBAAgB,CAAC,KAAa;IACpC,MAAM,aAAa,GAAG,KAAK,GAAG,CAAC,CAAC;IAChC,IAAI,aAAa,IAAI,CAAC,EAAE;MACtB,MAAM,mBAAmB,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,CAAC;MAC7D,OAAO,IAAI,CAAC,cAAc,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC;KACxG;IACD,OAAO,IAAI,CAAC,gBAAgB,CAAC;EAC/B,CAAC;EAEO,YAAY,CAAC,KAAa;IAChC,MAAM,SAAS,GAAG,KAAK,GAAG,CAAC,CAAC;IAC5B,IAAI,SAAS,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC,MAAM,EAAE;MACxC,MAAM,eAAe,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,CAAC;MACrD,OAAO,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;KACxF;IACD,OAAO,IAAI,CAAC,gBAAgB,CAAC;EAC/B,CAAC;EAEO,uBAAuB;IAC7B,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,aAAa,CAAC,gBAAgB,EAAE,CAAC,MAAM,GAAG,CAAC,EAAE;MACvE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW,CAAC,+BAA+B,EAAE,OAAO,CAAC,CAAC;KAChF;SAAM;MACL,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW,CAAC,+BAA+B,EAAE,MAAM,CAAC,CAAC;KAC/E;EACH,CAAC;EAEO,wBAAwB,CAAC,OAA8B;IAC7D,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,MAAM,IAAI,CAAC;EAC9E,CAAC;EAEO,gBAAgB,CAAC,MAAsB;IAC7C,OAAO,MAAM,CAAC,QAAQ,IAAI,MAAM,CAAC,YAAY,CAAC,YAAY,CAAC,wBAAwB,CAAC,CAAC;EACvF,CAAC;EAEO,cAAc,CAAC,MAAsB;IAC3C,OAAO,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,YAAY,CAAC,YAAY,CAAC,sBAAsB,CAAC,CAAC;EACnF,CAAC;EAEO,cAAc,CAAC,MAAsB;IAC3C,OAAO,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC,CAAC;EACjI,CAAC;EAEO,wBAAwB;IAC9B,IAAI,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,EAAE;MAClC,IAAI,CAAC,cAAc,CAAC,cAAc,GAAG,IAAI,CAAC,YAAY,CAAC;KACxD;EAEH,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF;AAED,IAAI,QAAQ,GAAG,CAAC,CAAC","sourcesContent":["import {Component, ComponentInterface, Element, Event, EventEmitter, h, Host, Listen, Prop, State, Watch} from '@stencil/core';\nimport {PopoverHelper} from '../../services/PopoverHelper';\nimport {isDefined, isNotEmpty, isUndefined} from '../../utils/utils';\nimport {isKeyboardKeyAction, Keymap} from '../../utils/Keymap';\nimport {SelectHelper} from '../../services/SelectHelper';\nimport {Components} from '../../components';\nimport SoulTextOption = Components.SoulTextOption;\nimport SoulAvatarOption = Components.SoulAvatarOption;\n\n@Component({\n  tag: 'soul-select',\n  styleUrl: 'soul-select.scss',\n  shadow: true\n})\nexport class SoulSelect implements ComponentInterface {\n\n  @Prop({reflect: true}) public additionalLabel?: string;\n  @Prop({reflect: true}) public disabled: boolean = false;\n  @Prop({reflect: true}) public disableSpaces: boolean = false;\n  @Prop({reflect: true}) public helpText?: string;\n  @Prop({reflect: true}) public inputOnly: boolean = false;\n  @Prop({reflect: true}) public label?: string;\n  @Prop({reflect: true}) public maxHeight = '18rem';\n  @Prop({reflect: true}) public noOptionsMessage = 'No options';\n  @Prop({reflect: true}) public placeholder?: string;\n  @Prop({reflect: true}) public searchable: boolean = false;\n  @Prop({reflect: true}) public stateless: boolean = false;\n  @Prop({reflect: true}) public status: 'warning' | 'critical';\n  @Prop({reflect: true}) public statusMessage?: string;\n  @Prop({reflect: true}) public tooltipPosition: 'top' | 'top-start' | 'top-end' | 'right' | 'right-start' | 'right-end' | 'bottom' | 'bottom-start' | 'bottom-end' | 'left' | 'left-start' | 'left-end' = 'top-start';\n  @Prop() public searchFunction: <K extends HTMLSoulTextOptionElement | HTMLSoulAvatarOptionElement>(option: K, term: string) => boolean;\n\n  @Element() public host: HTMLElement;\n\n  @Event() public soulOptionSelect: EventEmitter<any>;\n  @Event() public soulSearch: EventEmitter<SoulSelectSearchEvent>;\n  @State() private showEmptyOptionMessage = false;\n\n  private actionElement: HTMLSlotElement;\n  private inputElement: HTMLInputElement;\n  private selectionElement: HTMLDivElement;\n  private optionCloneElement: HTMLDivElement;\n  private optionsElement: HTMLSlotElement;\n  private optionListElement: HTMLPopoverElement;\n  private placeholderElement: HTMLDivElement;\n  private selectElement: HTMLDivElement;\n  private tooltipElement: HTMLSoulTooltipElement;\n\n  private supportedStatuses = ['warning', 'critical'];\n  private optionHeightObserver: ResizeObserver;\n  private highlightedIndex = -1;\n  private isPopoverVisible: boolean = false;\n  private readonly instanceId = `js-soul-select-${++selectId}-input`;\n  private popoverHelper: PopoverHelper = new PopoverHelper();\n\n  constructor() {\n    this.optionHeightObserver = new ResizeObserver(this.resizePlaceholderElement.bind(this));\n  }\n\n  public componentDidRender(): void {\n    this.optionListElement.addEventListener('toggle', (event: ToggleEvent) => {\n      if (event.newState === 'closed') {\n        this.isPopoverVisible = false;\n        this.popoverHelper.disconnect();\n        this.resetHighlight();\n      }\n    });\n    this.optionHeightObserver.disconnect();\n    this.optionHeightObserver.observe(this.optionCloneElement);\n    this.setPlaceholderElementHeight();\n    this.setActionSlotVisibility();\n    this.setTooltipTriggerElement();\n  }\n\n  public disconnectedCallback() {\n    this.optionHeightObserver.disconnect();\n    this.popoverHelper.disconnect();\n  }\n\n  @Listen('soulOptionChange')\n  public async onOptionChange(event: CustomEvent<SoulOption>): Promise<void> {\n    await this.updateSelectedOptionClone(event.detail);\n  }\n\n  @Listen('soulOptionHover')\n  public onOptionHover(event: CustomEvent<SoulOption>): void {\n    this.resetHighlight();\n    event.detail.highlighted = true;\n    this.highlightedIndex = this.getOptions().findIndex(option => option.highlighted);\n  }\n\n  @Listen('soulOptionClick')\n  public async onSoulClick(event: CustomEvent<SoulOption>): Promise<void> {\n    await this.selectOption(event.detail);\n  }\n\n  @Listen('soulOptionSelectChange')\n  public async onOptionSelectChange(event: CustomEvent<SoulOption>): Promise<void> {\n    const changedOption = event.detail;\n    this.doOnSelectChange(changedOption, changedOption.selected, false);\n  }\n\n  private async doOnSelectChange(option: SoulOption, isSelected: boolean, bubbling: boolean): Promise<void> {\n    if (isSelected) {\n      if (this.stateless) {\n        option.dataSelected = false;\n      } else {\n        this.deselectOtherOptions(option);\n        await this.updateSelectedOptionClone(option);\n      }\n      if (bubbling) {\n        this.soulOptionSelect.emit(option.value);\n      }\n    } else if (this.areAllOptionsDeselected() && !this.stateless) {\n      this.emptyElement(this.selectionElement);\n      if (bubbling) {\n        this.soulOptionSelect.emit(null);\n      }\n    }\n  }\n\n\n  @Watch('disabled')\n  public onDisabledChange() {\n    const selectedElements = this.getOptions().filter(option => option.dataSelected);\n    selectedElements.forEach(selectedElement => this.updateSelectedOptionClone(selectedElement));\n  }\n\n  public async onKeyUp(keyboardEvent: KeyboardEvent): Promise<void> {\n    if (this.searchable && !isKeyboardKeyAction(keyboardEvent)) {\n      await this.setFilterDataAttributes(this.inputElement.value.trim());\n      const matchingOptions = this.getMatchingOptions();\n      this.soulSearch.emit({searchTerm: this.inputElement.value, matches: matchingOptions.length, matchingOptions: matchingOptions});\n      if (!this.isPopoverVisible) {\n        this.togglePopover();\n      }\n      this.highlightNotFilteredOption();\n      this.showEmptyOptionMessage = this.getOptions().every(option => option.hasAttribute(SelectHelper.FILTER_ATTRIBUTE));\n    }\n  }\n\n  render() {\n    return (\n      <Host>\n        <div class={{\n          'soul-select': true,\n          'soul-select--critical': this.status === 'critical',\n          'soul-select--warning': this.status === 'warning'\n        }}\n             ref={el => this.selectElement = el as HTMLDivElement}>\n          {!this.inputOnly && (isNotEmpty(this.label) || isNotEmpty(this.additionalLabel)) ?\n            <div class=\"soul-select__label\">\n              <label htmlFor={this.instanceId}>{this.label}\n                {isNotEmpty(this.additionalLabel) ?\n                  <span class=\"soul-select__additional-label\">{this.additionalLabel}</span> : ''\n                }\n              </label>\n            </div> : ''\n          }\n          <div class=\"soul-select__control\">\n            {this.renderTooltip()}\n            <input disabled={this.disabled}\n                   onKeyDown={this.onKeyDown.bind(this)}\n                   onKeyUp={this.onKeyUp.bind(this)}\n                   onClick={this.togglePopover.bind(this)}\n                   id={this.instanceId}\n                   type=\"text\"\n                   spellcheck={false}\n                   class=\"soul-select__input\"\n                   readonly={!this.searchable}\n                   pattern=\".+\"\n                   required\n                   ref={el => this.inputElement = el as HTMLInputElement}/>\n            {!this.stateless ? <div class=\"soul-select__selection\" ref={el => this.selectionElement = el as HTMLDivElement}></div> : ''}\n            <div class=\"soul-select__placeholder\" ref={el => this.placeholderElement = el as HTMLDivElement}>\n              {isNotEmpty(this.placeholder) ?\n                <span class=\"soul-label soul-label--reduced\">{this.placeholder}</span> : ''\n              }\n            </div>\n            <div class=\"soul-select__input-icon\">\n              <soul-icon name=\"down\" size=\"s\" color=\"reduced\"></soul-icon>\n            </div>\n          </div>\n          {this.shouldRenderStatusMessage ?\n            <div class=\"soul-select__status-message\">{this.statusMessage}</div> : ''\n          }\n          {!this.inputOnly && isNotEmpty(this.helpText) ?\n            <div class=\"soul-select__help\">{this.helpText}</div> : ''\n          }\n          <div class=\"soul-select__option-clone\" ref={el => this.optionCloneElement = el as HTMLDivElement}></div>\n          <div class=\"soul-select__action\">\n            <slot ref={el => this.actionElement = el as HTMLSlotElement} name=\"action\"></slot>\n          </div>\n        </div>\n        <div class=\"soul-select__options\" {...{'popover': ''}} ref={el => this.optionListElement = el as HTMLPopoverElement}>\n          {this.showEmptyOptionMessage ? <div class=\"soul-select__options-message\"><span class=\"soul-label soul-label--reduced\">{this.noOptionsMessage}</span></div> : ''}\n          <slot ref={el => this.optionsElement = el as HTMLSlotElement} onSlotchange={this.setPlaceholderElementHeight.bind(this)}></slot>\n        </div>\n      </Host>\n    );\n  }\n\n  public get shouldRenderTooltip(): boolean {\n    return this.inputOnly && (this.shouldRenderStatusMessage || isNotEmpty(this.helpText));\n  }\n\n  public get shouldRenderStatusMessage(): boolean {\n    return this.isStatusValid  && isNotEmpty(this.statusMessage);\n  }\n\n  private get isStatusValid(): boolean {\n    return this.supportedStatuses.includes(this.status);\n  }\n\n  private renderTooltip() {\n    return this.shouldRenderTooltip ? (\n      <soul-tooltip text={this.shouldRenderStatusMessage ? this.statusMessage : this.helpText} status={this.status ? this.status : undefined} position={this.tooltipPosition}\n                    ref={el => this.tooltipElement = el as HTMLSoulTooltipElement}></soul-tooltip>) : '';\n  }\n\n  private getMatchingOptions(): HTMLSoulOption[] {\n    return this.getOptions().filter(option => !this.isOptionFiltered(option) && !option.nonFilterable);\n  }\n\n  private highlightNotFilteredOption(): void {\n    const highlightedOption = this.getOptions()[this.highlightedIndex];\n    if (!this.isOptionUsable(highlightedOption)) {\n      this.highlightFirstNotFilteredOption();\n    }\n  }\n\n  private isOptionFiltered(option: HTMLSoulOption): boolean {\n    return option.hasAttribute(SelectHelper.FILTER_ATTRIBUTE);\n  }\n\n  private highlightFirstNotFilteredOption(): void {\n    this.removeCurrentOptionHighlight();\n    const firstVisibleOptionIndex = this.getOptions().findIndex((option) => this.isOptionUsable(option));\n    if (firstVisibleOptionIndex !== -1) {\n      this.highlightOptionByIndex(firstVisibleOptionIndex);\n    }\n  }\n\n  private async setFilterDataAttributes(term: string): Promise<void> {\n    const options = this.getOptions().filter(option => !option.nonFilterable);\n    const allMatchPromises: Promise<void>[] = [];\n    for (const soulOption of options) {\n      if (this.isOptionHidden(soulOption)) {\n        soulOption.setAttribute(SelectHelper.FILTER_ATTRIBUTE, 'true');\n      } else if (this.searchFunction && term !== '') {\n        this.searchFunction(soulOption, term) ?\n          soulOption.removeAttribute(SelectHelper.FILTER_ATTRIBUTE) :\n          soulOption.setAttribute(SelectHelper.FILTER_ATTRIBUTE, 'true');\n      } else {\n        allMatchPromises.push(soulOption.match(this.inputElement.value).then(matches => {\n          matches ? soulOption.removeAttribute(SelectHelper.FILTER_ATTRIBUTE) : soulOption.setAttribute(SelectHelper.FILTER_ATTRIBUTE, 'true');\n        }));\n      }\n    }\n    await Promise.all(allMatchPromises);\n  }\n\n  private async onKeyDown(event: KeyboardEvent): Promise<void> {\n    switch (event.key) {\n      case Keymap.SPACE: {\n        this.onSpaceKeyDown(event);\n        break;\n      }\n      case Keymap.DOWN: {\n        this.openOrElse(() => this.highlightNextOption());\n        event.preventDefault();\n        break;\n      }\n      case Keymap.UP: {\n        this.openOrElse(() => this.highlightPreviousOption());\n        event.preventDefault();\n        break;\n      }\n      case Keymap.ENTER: {\n        this.openOrElse(async () => await this.selectHighlightedOption());\n        break;\n      }\n      case Keymap.ESC: {\n        if (this.isPopoverVisible) {\n          this.togglePopover();\n          await this.resetSearch();\n        }\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  private async selectOption(option: SoulOption): Promise<void> {\n    await this.resetSearch();\n    this.togglePopover();\n    if (!option.dataSelected) {\n      option.dataSelected = true;\n      await this.doOnSelectChange(option, option.dataSelected, true);\n    }\n  }\n\n  private async resetSearch(): Promise<void> {\n    if (this.searchable) {\n      this.inputElement.value = '';\n      await this.setFilterDataAttributes('');\n      this.showEmptyOptionMessage = false;\n      const matchingOptions = this.getMatchingOptions();\n      this.soulSearch.emit({searchTerm: '', matches: matchingOptions.length, matchingOptions: matchingOptions});\n    }\n  }\n\n  private areAllOptionsDeselected(): boolean {\n    return this.getOptions().every(option => !option.dataSelected);\n  }\n\n  private resetHighlight(): void {\n    this.getOptions().forEach(optionElement => optionElement.highlighted = false);\n  }\n\n  private async updateSelectedOptionClone(option: SoulOption): Promise<void> {\n    const selectedOptionClone = await option.clone();\n    selectedOptionClone.passive = true;\n    selectedOptionClone.selected = false;\n    selectedOptionClone.disabled = this.disabled;\n    this.emptyElement(this.selectionElement);\n    this.selectionElement?.appendChild(selectedOptionClone);\n  }\n\n  private emptyElement(element: HTMLElement): void {\n    while (element?.firstChild) {\n      element.removeChild(element.firstChild);\n    }\n  }\n\n  private deselectOtherOptions(exclude: SoulOption): void {\n    this.getOptions().forEach(option => {\n      if (option.instanceId !== exclude.instanceId) {\n        option.dataSelected = false;\n      }\n    });\n  }\n\n  private openOrElse(elseFunction: () => void | Promise<void>): void {\n    if (!this.isPopoverVisible) {\n      this.togglePopover();\n    } else {\n      elseFunction();\n    }\n  }\n\n  private togglePopover(): void {\n    if (this.isPopoverVisible) {\n      this.optionListElement.hidePopover();\n    } else {\n      this.setHighlightedOptionIndex();\n      this.optionListElement.showPopover();\n      this.isPopoverVisible = true;\n      this.popoverHelper.connect(this.inputElement, this.optionListElement, this.maxHeight);\n      this.scrollToHighlightedOption();\n    }\n  }\n\n  private async setPlaceholderElementHeight(): Promise<void> {\n    const firstOption = this.getOptions()[0];\n    if (firstOption) {\n      const clonedOption = await firstOption.clone();\n      this.optionCloneElement.replaceChildren(clonedOption);\n      this.placeholderElement.style.height = `${this.optionCloneElement.getBoundingClientRect().height}px`;\n    }\n  }\n\n  private onSpaceKeyDown(event: KeyboardEvent): void {\n    if (!this.isPopoverVisible) {\n      this.togglePopover();\n    }\n    if (this.disableSpaces) {\n      event.preventDefault();\n    }\n  }\n\n  private setHighlightedOptionIndex(): void {\n    this.highlightedIndex = this.getOptions().findIndex(option => option.dataSelected);\n  }\n\n  private removeCurrentOptionHighlight(): void {\n    const assignedElements = this.getOptions();\n    if (isDefined(assignedElements[this.highlightedIndex])) {\n      assignedElements[this.highlightedIndex].highlighted = false;\n    }\n  }\n\n  private isLastOptionHighlighted(): boolean {\n    return this.highlightedIndex + 1 === this.getOptions().length;\n  }\n\n  private isFirstOptionHighlighted(): boolean {\n    return this.highlightedIndex === 0;\n  }\n\n  private highlightOptionByIndex(index: number): void {\n    this.highlightedIndex = index;\n    const assignedElements = this.getOptions();\n    assignedElements[index].highlighted = true;\n  }\n\n  private highlightPreviousOption(): void {\n    if (!this.isFirstOptionHighlighted()) {\n      const previousIndex = this.getPreviousIndex(this.highlightedIndex);\n      if (previousIndex != this.highlightedIndex) {\n        this.removeCurrentOptionHighlight();\n        this.highlightOptionByIndex(previousIndex);\n        this.scrollUpToOption();\n      }\n    }\n  }\n\n  private highlightNextOption(): void {\n    if (!this.isLastOptionHighlighted()) {\n      const nextIndex = this.getNextIndex(this.highlightedIndex);\n      if (nextIndex != this.highlightedIndex) {\n        this.removeCurrentOptionHighlight();\n        this.highlightOptionByIndex(nextIndex);\n        this.scrollDownToOption();\n      }\n    }\n  }\n\n  private scrollUpToOption(): void {\n    const highlightedOption = this.getOptions()[this.highlightedIndex];\n    if (!this.isHighlightedOptionVisible(highlightedOption)) {\n      highlightedOption.scrollIntoView();\n    }\n  }\n\n  private scrollDownToOption(): void {\n    const highlightedOption = this.getOptions()[this.highlightedIndex];\n    if (!this.isHighlightedOptionVisible(highlightedOption)) {\n      const optionsListHeight = this.optionListElement.offsetHeight;\n      const optionHeight = highlightedOption.offsetHeight;\n      const scrollOffset = this.optionListElement.scrollTop;\n      const topOffset = (this.highlightedIndex * optionHeight) + optionHeight - scrollOffset - optionsListHeight;\n      this.optionListElement.scrollTo({top: topOffset + scrollOffset});\n    }\n  }\n\n  private isHighlightedOptionVisible(option: HTMLSoulOption): boolean {\n    const optionsListHeight = this.optionListElement.offsetHeight;\n    const optionHeight = option.offsetHeight;\n    const scrollOffset = this.optionListElement.scrollTop;\n\n    return (this.highlightedIndex * optionHeight) >= scrollOffset && (this.highlightedIndex * optionHeight) + optionHeight <= scrollOffset + optionsListHeight;\n  }\n\n  private getOptions(): HTMLSoulOption[] {\n    return this.optionsElement.assignedElements().reduce((previousValue, element) => {\n      if (element.tagName === 'SOUL-OPTION-GROUP') {\n        const elementOptions = Array.from(element.children) as HTMLSoulOption[];\n        previousValue.push(...elementOptions);\n      } else {\n        previousValue.push(element as HTMLSoulOption);\n      }\n      return previousValue;\n    }, [] as HTMLSoulOption[]);\n  }\n\n  private async selectHighlightedOption(): Promise<void> {\n    const assignedElements = this.getOptions();\n    const optionToSelect = assignedElements[this.highlightedIndex];\n    if (this.isOptionUsable(optionToSelect)) {\n      await this.selectOption(optionToSelect);\n    }\n  }\n\n  private scrollToHighlightedOption(): void {\n    setTimeout(() => {\n      const selectedOption = this.getOptions()[this.highlightedIndex];\n      if (selectedOption && !this.isHighlightedOptionVisible(selectedOption)) {\n        selectedOption.scrollIntoView();\n      }\n    }, 0);\n  }\n\n  private getPreviousIndex(index: number): number {\n    const previousIndex = index - 1;\n    if (previousIndex >= 0) {\n      const previousIndexOption = this.getOptions()[previousIndex];\n      return this.isOptionUsable(previousIndexOption) ? previousIndex : this.getPreviousIndex(previousIndex);\n    }\n    return this.highlightedIndex;\n  }\n\n  private getNextIndex(index: number): number {\n    const nextIndex = index + 1;\n    if (nextIndex < this.getOptions().length) {\n      const nextIndexOption = this.getOptions()[nextIndex];\n      return this.isOptionUsable(nextIndexOption) ? nextIndex : this.getNextIndex(nextIndex);\n    }\n    return this.highlightedIndex;\n  }\n\n  private setActionSlotVisibility(): void {\n    if (!this.inputOnly && this.actionElement.assignedElements().length > 0) {\n      this.selectElement.style.setProperty('--_soul-select-action-display', 'block');\n    } else {\n      this.selectElement.style.setProperty('--_soul-select-action-display', 'none');\n    }\n  }\n\n  private resizePlaceholderElement(entries: ResizeObserverEntry[]): void {\n    this.placeholderElement.style.height = `${entries[0].contentRect.height}px`;\n  }\n\n  private isOptionDisabled(option: HTMLSoulOption): boolean {\n    return option.disabled || option.hasAttribute(SelectHelper.GROUP_DISABLED_ATTRIBUTE);\n  }\n\n  private isOptionHidden(option: HTMLSoulOption): boolean {\n    return option.hidden || option.hasAttribute(SelectHelper.GROUP_HIDDEN_ATTRIBUTE);\n  }\n\n  private isOptionUsable(option: HTMLSoulOption): boolean {\n    return !(isUndefined(option) || this.isOptionDisabled(option) || this.isOptionHidden(option) || this.isOptionFiltered(option));\n  }\n\n  private setTooltipTriggerElement(): void {\n    if (isDefined(this.tooltipElement)) {\n      this.tooltipElement.triggerElement = this.inputElement;\n    }\n\n  }\n}\n\nlet selectId = 0;\n\ninterface HTMLPopoverElement extends HTMLDivElement {\n  showPopover: () => void;\n  hidePopover: () => void;\n  togglePopover: () => void;\n}\n\ntype HTMLSoulOption = HTMLSoulTextOptionElement | HTMLSoulAvatarOptionElement;\ntype SoulOption = SoulTextOption | SoulAvatarOption;\n\ntype SoulSelectSearchEvent = { searchTerm: string, matches: number, matchingOptions: HTMLSoulOption[] };\n\ninterface ToggleEvent extends Event {\n  newState: 'open' | 'closed';\n  oldState: 'open' | 'closed';\n}\n"]}